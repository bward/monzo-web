<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" href="main.css" />
	</head>
	<body>
		<script src="bundle.js"></script>
		<script>
			var urlParams = new URLSearchParams(window.location.search);
			var authorizationCode = urlParams.get("code");

			fetch("config.json")
			.then(res => res.json())
			.then(config => {
				if (!authorizationCode) {
					window.location.replace(`https://auth.monzo.com/?client_id=${config.clientId}&redirect_uri=${config.redirectUri}&response_type=code&state=${Math.random().toString(36).substr(2)}`);
				} else {
					Elm.Main.fullscreen({authorizationCode, config});
				}
			});
	</script>
	</body>
</html>